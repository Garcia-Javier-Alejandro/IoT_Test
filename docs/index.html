<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="stylesheet" href="/css/styles.css" />
  <meta charset="UTF-8" />
  <title>Control de Piscina</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
  <div class="stage">
    <div class="shell">
      <!-- Header -->
      <div class="header">
        <h1>Control de Piscina</h1>
      </div>
      <div class="divider"></div>

      <!-- Main content -->
      <div class="content">

        <!-- Login card -->
        <div class="card" id="login-card">
          <div class="card-title">
            <span class="icon" aria-hidden="true">üîë</span>
            Credenciales MQTT
          </div>

          <div class="fields">
            <div class="field">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21a8 8 0 0 0-16 0"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              <input id="mqtt-user" placeholder="User-dashboard-01" autocomplete="username" />
            </div>

            <div class="field">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
              <input id="mqtt-pass" placeholder="Password" type="password" autocomplete="current-password" />
            </div>
          </div>

          <button id="btn-connect" class="btn-primary">
            Conectar
          </button>
        </div>

        <!-- Pump Status & Control -->
        <div class="card clickable" id="btn-pump">
          <div class="card-title">
            <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
            Bomba
          </div>
          <div class="pill">
            <span id="pump-dot" class="dot"></span>
            <span id="pump-status" class="large-status">?</span>
          </div>
          <div class="card-hint">Click para encender/apagar</div>
        </div>

        <!-- Valve Status & Control -->
        <div class="card clickable" id="btn-valve">
          <div class="card-title">
            <span class="icon" aria-hidden="true">üîÄ</span>
            V√°lvulas
          </div>
          <div class="pill">
            <span id="valve-dot" class="dot"></span>
            <span id="valve-status" class="large-status">?</span>
          </div>
          <div class="card-hint">Click para cambiar modo (1 ‚Üî 2)</div>
        </div>

        <!-- MQTT Connection Status -->
        <div class="row-card">
          <div class="row-label">Conexi√≥n MQTT</div>
          <div class="wifi" id="conn-status">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12.55a11 11 0 0 1 14.08 0"/>
              <path d="M8.5 15.5a6.5 6.5 0 0 1 7 0"/>
              <path d="M12 19h.01"/>
            </svg>
            <span id="conn-text">Desconectado</span>
          </div>
        </div>

        <!-- Event Log -->
        <div class="log-panel">
          <div class="log-header">
            <span>Registro de Eventos</span>
            <div class="log-actions">
              <button id="btn-log-toggle" class="btn-secondary" aria-label="Mostrar/ocultar log">
                ‚ñº
              </button>
              <button id="btn-log-clear" class="btn-secondary" aria-label="Limpiar log">
                üóëÔ∏è
              </button>
            </div>
          </div>
          <div id="log-box" class="log-content">
            <div class="log-line">Esperando conexi√≥n...</div>
          </div>
        </div>

      </div>

      <!-- Footer -->
      <div class="footer">
        <p>ESP32 Pool Control v2.0 | 2025</p>
      </div>
    </div>
  </div>

  <!-- External libraries -->
  <script src="https://unpkg.com/mqtt@5/dist/mqtt.min.js"></script>

  <!-- Application modules -->
  <script src="/config.js"></script>
  <script src="/js/log.js"></script>
  <script src="/js/mqtt.js"></script>
  <script src="/js/app.js"></script>
</body>
</html>
